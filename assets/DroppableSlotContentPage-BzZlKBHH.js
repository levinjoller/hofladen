const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SlotDraggable-EIlRTwn1.js","assets/vendor-grid-Bad8I008.js","assets/vendor-ionic-DL3WDV-g.js","assets/index-YNPHqK-K.js","assets/index-CfmnWJvu.css","assets/SlotDraggable-Cm4aFfRt.css"])))=>i.map(i=>d[i]);
import{k as R,a2 as D,_ as L}from"./vendor-ionic-DL3WDV-g.js";import{u as M,L as b}from"./LoadingSpinner-DgHZcYJm.js";import{l as A}from"./PaloxListPage-BxSjq6nu.js";import{j as B,r as E,c as S,k as G,b as P,l as v,q as w,u as s,m as p,Q as V,W as h,U as N,A as y,G as T,S as q,Y as F,x as O,R as U}from"./vendor-grid-Bad8I008.js";import{_ as j}from"./index-YNPHqK-K.js";import"./product-types-CV3CSiow.js";import"./customer-list-schema-BqaoqCG1.js";import"./persons-CQb0edLH.js";import"./supplier-list-schema-DiLhSYiL.js";function z(d,c,u){const n=E([]);B(()=>{const e=d();if(!e)return;const r=e.map(l=>{const t=[...l.levels].reverse();return c({slotId:l.slot_id,paloxIds:[...t].reverse().map(o=>o.palox_id)}),{...l,levels:t}});n.value=r});function a(e){u({slotId:e.slot_id,paloxIds:[...e.levels].reverse().map(r=>r.palox_id)})}return{slots:n,updateSlot:a}}const _=1;function K(d){const c=S(()=>{const n=d(),a=new Set,e=new Set;for(const t of n)a.add(t.column??_),e.add(t.slot??_);const r=[...a].sort((t,o)=>t-o),l=[...e].sort((t,o)=>t-o);return{columnMap:new Map(r.map((t,o)=>[t,o+1])),rowMap:new Map(l.map((t,o)=>[t,o+1])),totalColumns:r.length,totalRows:l.length}}),u=n=>{const{columnMap:a,rowMap:e}=c.value;return{gridColumnStart:a.get(n.column??_)??1,gridRowStart:e.get(n.slot??_)??1}};return{totalColumns:S(()=>c.value.totalColumns),totalRows:S(()=>c.value.totalRows),getGridItemStyle:u}}const Q={key:0,class:"ion-padding ion-text-center"},W={key:1,class:"stock-fixed-viewport"},Y={class:"header-fix"},Z={class:"stock-scroll-area"},H=G({__name:"DroppableSlotContentPage",props:{slot:{},selectedStock:{}},emits:["initial-order","changed-order"],setup(d,{emit:c}){const u=F({loader:()=>L(()=>import("./SlotDraggable-EIlRTwn1.js"),__vite__mapDeps([0,1,2,3,4,5])),loadingComponent:b,delay:200}),n=d,a=c,{data:e,isLoading:r,execute:l}=M(A);P(async()=>{const i=n.slot.map(m=>m.slot_id).filter(Boolean);i.length&&await l(i)});function t(i){a("initial-order",i)}function o(i){a("changed-order",i)}const{slots:g,updateSlot:k}=z(()=>e.value,t,o),{totalColumns:x,totalRows:C,getGridItemStyle:I}=K(()=>g.value);return(i,m)=>s(r)?(p(),v("div",Q,[V(s(R),{name:"crescent"})])):s(g).length?(p(),v("div",W,[h("h2",Y," Lager "+N(d.selectedStock.display_name)+" - Zuordnung ändern ",1),h("div",Z,[h("div",{class:"stock-grid",style:y({"--cols":s(x),"--rows":s(C)})},[(p(!0),v(T,null,q(s(g),f=>(p(),w(s(u),{key:f.slot_id,slotData:f,style:y(s(I)(f)),onSlotChange:s(k)},null,8,["slotData","style","onSlotChange"]))),128))],4)])])):(p(),w(s(D),{key:2,class:"ion-padding"},{default:O(()=>[...m[0]||(m[0]=[U("Keine Daten verfügbar.",-1)])]),_:1}))}}),rt=j(H,[["__scopeId","data-v-c43c90ba"]]);export{rt as default};
