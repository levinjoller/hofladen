const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StockColumnSlotSelectPage-DSZ2Xjb1.js","assets/vendor-ionic-DL3WDV-g.js","assets/vendor-grid-Bad8I008.js","assets/PaloxListPage-BxSjq6nu.js","assets/index-YNPHqK-K.js","assets/index-CfmnWJvu.css","assets/LoadingSpinner-DgHZcYJm.js","assets/LoadingSpinner-BxrlA5ZL.css","assets/product-types-CV3CSiow.js","assets/customer-list-schema-BqaoqCG1.js","assets/persons-CQb0edLH.js","assets/supplier-list-schema-DiLhSYiL.js","assets/PaloxListPage-CL6JbNxr.css","assets/StockColumnSlotSelectPage-pgblD3gl.css","assets/SelectWithSearch-D6un5e8Q.js","assets/search-type-BiWLnLKr.js"])))=>i.map(i=>d[i]);
import{a as j,b as E,w as v,t as I,h as R,c as G,d as J,e as Z,g as ee,i as te,r as le,A as oe,k as ae,v as se,_ as w,C as ne}from"./vendor-ionic-DL3WDV-g.js";import{k as re,w as ie,b as de,q as b,m as u,x as n,Q as l,u as e,R as N,U as C,l as M,v as D,Y as U,e as c,X as B,a7 as ue,c as ce}from"./vendor-grid-Bad8I008.js";import{d as pe,f as me,p as _,b as fe,c as Se,_ as he}from"./index-YNPHqK-K.js";import{F as ge,a as xe,f as K,b as Pe,c as ye,d as ke,e as ve}from"./PaloxListPage-BxSjq6nu.js";import{gl as Ie,u as be,L as O}from"./LoadingSpinner-DgHZcYJm.js";import{i as Ce}from"./is-numeric-key-DsADXjeW.js";import{S as Me}from"./search-type-BiWLnLKr.js";import"./product-types-CV3CSiow.js";import"./customer-list-schema-BqaoqCG1.js";import"./persons-CQb0edLH.js";import"./supplier-list-schema-DiLhSYiL.js";const _e=()=>({currentStep:1,selectedPaloxType:null,selectedPaloxNumber:null,selectedSupplier:null,selectedCustomer:null,selectedProduct:null,selectedStock:null,selectedStockColumnSlot:null,_isActionLoading:!1,actionErrorMessage:null}),Ve=pe("paloxIntoStock",{state:()=>_e(),getters:{isActionLoading(){return this._isActionLoading},getActionErrorMessage(){return this.actionErrorMessage},canProceed(o){switch(o.currentStep){case 1:return!!(o.selectedPaloxType&&o.selectedPaloxNumber&&o.selectedSupplier&&o.selectedProduct&&o.selectedStock);case 2:return!!o.selectedStockColumnSlot;default:return!1}}},actions:{setSelectedSlot(o){this.selectedStockColumnSlot=o},setSelectedPaloxType(o){this.selectedPaloxType=o},setActionStatus(o,r){this._isActionLoading=o,this.actionErrorMessage=r},initializeState(o){this.$reset(),o&&(this.selectedStock=o)},async nextStep(){if(!this.canProceed)return ge;if(this.currentStep<2)return this.currentStep++,{success:!0,parentReloadRequired:!1,closeModal:!1,isCompleted:!1};const{execute:o}=Ie(xe,(i,S)=>this.setActionStatus(i,S));await o({paloxTypeId:this.selectedPaloxType.id,paloxNumber:this.selectedPaloxNumber,stockColumnSlotId:this.selectedStockColumnSlot.slot_id,productId:this.selectedProduct.id,supplierId:this.selectedSupplier.id,customerId:this.selectedCustomer?.id});const r=!this.actionErrorMessage;return{success:r,parentReloadRequired:r,closeModal:r,isCompleted:!0}},prevStep(){this.currentStep>1&&this.currentStep--}}}),Te={key:0},Le={key:1},Ae={key:1},Ee=re({__name:"PaloxIntoStockStepperModal",props:{title:{},activeStrategy:{},currentStock:{}},setup(o){const r=U({loader:()=>w(()=>import("./StockColumnSlotSelectPage-DSZ2Xjb1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),loadingComponent:O,delay:200}),i=U({loader:()=>w(()=>import("./SelectWithSearch-D6un5e8Q.js"),__vite__mapDeps([14,1,2,4,5,15,6,7])),loadingComponent:O,delay:200}),S=o;function q(a){!Ce(a)&&a.preventDefault()}function F(a){a.target.blur()}const p=Ve(),{nextStep:$,prevStep:z}=p,{canProceed:H,currentStep:m,isActionLoading:V,actionErrorMessage:T,selectedPaloxType:h,selectedPaloxNumber:d,selectedSupplier:g,selectedCustomer:x,selectedProduct:P,selectedStock:f,selectedStockColumnSlot:y}=me(p),L=ce({get:()=>y.value?[y.value]:null,set:a=>{p.setSelectedSlot(a&&a.length>0?a[0]:null)}});function W(a){return Math.min(Math.max(a,0),9999)}ie(d,a=>{a!=null&&(d.value=W(a))});async function Q(){const{success:a,parentReloadRequired:t,closeModal:s}=await $();a?s&&(_(`Die Paloxe (${d.value}) wurde erfolgreich zuoberst auf den Stapel ${y.value?.display_name} eingelagert!`,"success",6e3),A(t)):T.value&&_(T.value,"danger",1e4)}function A(a){ne.dismiss(a)}const{data:k,isLoading:X,execute:Y}=be(K);return de(async()=>{p.initializeState(S.currentStock),await Y(!0),Array.isArray(k.value)&&k.value.length>0?p.setSelectedPaloxType(k.value[0]):_("Es wurde keinen Standardwert fÃ¼r die Paloxenart gefunden.","warning")}),(a,t)=>(u(),b(e(se),null,{default:n(()=>[l(e(j),null,{default:n(()=>[l(e(E),null,{default:n(()=>[l(e(v),{slot:"start"},{default:n(()=>[l(e(I),{onClick:e(z),disabled:e(m)===1},{default:n(()=>[l(e(R),{icon:e(fe)},null,8,["icon"])]),_:1},8,["onClick","disabled"])]),_:1}),l(e(G),null,{default:n(()=>[N(C(o.title)+" - "+C(e(m))+" / 2",1)]),_:1}),l(e(v),{slot:"end"},{default:n(()=>[l(e(I),{onClick:t[0]||(t[0]=s=>A(!1))},{default:n(()=>[l(e(R),{icon:e(Se)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),l(e(J),{class:"ion-padding"},{default:n(()=>[e(m)===1?(u(),M("div",Te,[l(e(Z),null,{default:n(()=>[l(e(i),{title:"Paloxenart",modelValue:e(h),"onUpdate:modelValue":t[1]||(t[1]=s=>c(h)?h.value=s:null),fetchMethod:()=>e(K)(!1),isSearchable:!1,isParentLoading:e(X)},null,8,["modelValue","fetchMethod","isParentLoading"]),l(e(ee),null,{default:n(()=>[l(e(te),{position:"fixed"},{default:n(()=>[...t[10]||(t[10]=[N("Paloxen-Nr.",-1)])]),_:1}),l(e(le),{class:"ion-text-right",modelValue:e(d),"onUpdate:modelValue":t[2]||(t[2]=s=>c(d)?d.value=s:null),modelModifiers:{number:!0},type:"number",inputmode:"numeric",placeholder:"0000",pattern:"[0-9]*",min:"1",max:"9999",onKeydown:[q,ue(F,["enter"])],onPaste:t[3]||(t[3]=B(()=>{},["prevent"])),onDrop:t[4]||(t[4]=B(()=>{},["prevent"])),maxlength:4},null,8,["modelValue"])]),_:1}),l(e(i),{title:"Lieferant",modelValue:e(g),"onUpdate:modelValue":t[5]||(t[5]=s=>c(g)?g.value=s:null),fetchMethod:e(Pe),isSearchable:!1},null,8,["modelValue","fetchMethod"]),l(e(i),{title:"Produkt",modelValue:e(P),"onUpdate:modelValue":t[6]||(t[6]=s=>c(P)?P.value=s:null),fetchMethod:e(ye),isSearchable:!0,searchType:e(Me).Text},null,8,["modelValue","fetchMethod","searchType"]),l(e(i),{title:"Lager",modelValue:e(f),"onUpdate:modelValue":t[7]||(t[7]=s=>c(f)?f.value=s:null),fetchMethod:e(ke),isSearchable:!1},null,8,["modelValue","fetchMethod"]),l(e(i),{title:"Kunde",modelValue:e(x),"onUpdate:modelValue":t[8]||(t[8]=s=>c(x)?x.value=s:null),fetchMethod:e(ve),isSearchable:!1},null,8,["modelValue","fetchMethod"])]),_:1})])):e(m)===2?(u(),M("div",Le,[e(f)?(u(),b(e(r),{key:0,modelValue:L.value,"onUpdate:modelValue":t[9]||(t[9]=s=>L.value=s),selectedStock:e(f),activeStrategy:o.activeStrategy},null,8,["modelValue","selectedStock","activeStrategy"])):D("",!0)])):D("",!0)]),_:1}),l(e(oe),null,{default:n(()=>[l(e(E),null,{default:n(()=>[l(e(v),{slot:"end"},{default:n(()=>[l(e(I),{onClick:Q,disabled:!e(H)||e(V)},{default:n(()=>[e(V)?(u(),b(e(ae),{key:0,name:"crescent"})):(u(),M("span",Ae,C(e(m)>1?"Speichern":"Weiter"),1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),ze=he(Ee,[["__scopeId","data-v-f480b9d3"]]);export{ze as default};
