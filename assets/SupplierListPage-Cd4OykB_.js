import{t as d,d as c,v as f,x as m,a as _,w as t,e,o as h,b as a,I as g,f as w,p as y,q as I,g as L,h as x,i as P,m as b,y as D}from"./index-B4NoDcFB.js";import{u as N,A as S,t as B}from"./use-db-action-CqLjSPSZ.js";import{S as C}from"./supplier-list-schema-B4OYM1ea.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./persons-Cmw6zaTL.js";async function T(){const{data:o,error:r}=await d.from("suppliers").select("\n      id,\n      created_at,\n      person:fk_person (\n        display_name\n      )\n    ");if(r)throw r;if(!o)return[];const s=C.safeParse(o);if(!s.success)throw s.error;return s.data.sort((n,l)=>n.person.display_name.localeCompare(l.person.display_name))}const V=c({__name:"SupplierListPage",setup(o){const r=[{headerName:"Name",field:"person.display_name"},{headerName:"Erstellt am",field:"created_at",valueFormatter:B}],{data:s,isLoading:n,errorMessage:l,execute:p}=N(T);return f(async()=>{await p()}),m(l,i=>{i&&D(i,"danger",1e4)}),(i,u)=>(h(),_(e(b),null,{default:t(()=>[a(e(g),{translucent:!0},{default:t(()=>[a(e(w),null,{default:t(()=>[a(e(y),{slot:"start"},{default:t(()=>[a(e(I))]),_:1}),a(e(L),null,{default:t(()=>[...u[0]||(u[0]=[x("Lieferanten Ãœbersicht",-1)])]),_:1})]),_:1})]),_:1}),a(e(P),{fullscreen:!0},{default:t(()=>[a(S,{rowData:e(s),columnDefs:r,isParentLoading:e(n)},null,8,["rowData","isParentLoading"])]),_:1})]),_:1}))}});export{V as default};
