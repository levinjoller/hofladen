import{k as _,b as D,w as M,q as d,m as l,x as t,Q as n,u as e,R as b,U as y,v as T,l as v,a7 as F,r as w,W as K,G as L,S as V,n as O}from"./vendor-grid-Bad8I008.js";import{a as R,b as $,w as E,t as q,h as G,c as H,d as P,X as Q,k as U,e as W,g as X,i as Z,v as j,C as S}from"./vendor-ionic-DL3WDV-g.js";import{b as z}from"./index-YNPHqK-K.js";import{u as A}from"./LoadingSpinner-DgHZcYJm.js";import{i as J}from"./is-numeric-key-DsADXjeW.js";const Y={key:1,class:"ion-text-center loading-spinner-container"},ee={key:2},te={class:"ion-text-center"},ie=_({__name:"DropdownSearchModal",props:{title:{},fetchMethod:{type:Function},isSearchable:{type:Boolean},searchType:{}},setup(s){const u=s,{data:c,isLoading:I,execute:h}=A(u.fetchMethod),m=c,f=w(null),p=w("");D(async()=>{u.isSearchable||await h()}),M(()=>u.isSearchable,async a=>{a&&await O(()=>{setTimeout(()=>{f.value&&f.value.$el.setFocus()},100)})},{immediate:!0});const x=async a=>{const i=a.target.value;p.value=i;const o=u.searchType==="numeric",r=o?i.replace(/\D/g,""):i;if(o){const k=parseInt(r);if(!r||isNaN(k))return c.value=[];await h(k)}else r.length>=3?await h(r):c.value=[]};function C(a){!J(a)&&a.preventDefault()}const N=()=>{c.value.length>0&&g(c.value[0])},g=a=>{S.dismiss(a)};function B(){S.dismiss()}return(a,i)=>(l(),d(e(j),null,{default:t(()=>[n(e(R),null,{default:t(()=>[n(e($),null,{default:t(()=>[n(e(E),{slot:"start"},{default:t(()=>[n(e(q),{onClick:B},{default:t(()=>[n(e(G),{icon:e(z)},null,8,["icon"])]),_:1})]),_:1}),n(e(H),null,{default:t(()=>[b("Suchen nach "+y(s.title),1)]),_:1})]),_:1})]),_:1}),n(e(P),{class:"ion-padding"},{default:t(()=>[s.isSearchable?(l(),d(e(Q),{key:0,ref_key:"searchbarRef",ref:f,placeholder:s.searchType==="numeric"?"Nummer eintippen...":"Min. 3 Zeichen eintippen...",inputmode:s.searchType==="numeric"?"numeric":"text",debounce:300,onIonInput:x,onKeydown:[F(N,["enter"]),i[0]||(i[0]=o=>s.searchType==="numeric"?C:void 0)]},null,8,["placeholder","inputmode"])):T("",!0),e(I)?(l(),v("div",Y,[n(e(U),{name:"crescent"})])):!e(I)&&e(m).length===0&&(s.searchType==="numeric"?p.value.length>0:p.value.length>=3)?(l(),v("div",ee,[K("p",te,"Kein/e "+y(s.title)+" gefunden.",1)])):e(m).length>0?(l(),d(e(W),{key:3},{default:t(()=>[(l(!0),v(L,null,V(e(m),o=>(l(),d(e(X),{key:o.id,button:"",onClick:r=>g(o)},{default:t(()=>[n(e(Z),null,{default:t(()=>[b(y(o.display_name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):T("",!0)]),_:1})]),_:1}))}});export{ie as default};
