System.register(["./index-legacy-CXiE44-D.js","./use-db-action-legacy-C83uysaO.js","./is-numeric-key-legacy-BnOCzNij.js","./_plugin-vue_export-helper-legacy-BVIICed7.js"],function(e,a){"use strict";var n,t,l,i,c,u,s,r,o,d,p,h,y,f,m,g,v,_,k,b,x,w,S,T,j,I,F,M,B,C,D,N,K,A,E;return{setters:[e=>{n=e.d,t=e.r,l=e.v,i=e.x,c=e.a,u=e.o,s=e.w,r=e.b,o=e.e,d=e.I,p=e.f,h=e.p,y=e.l,f=e.F,m=e.aD,g=e.g,v=e.h,_=e.aw,k=e.i,b=e.aE,x=e.A,w=e.aF,S=e.aG,T=e.B,j=e.s,I=e.aH,F=e.ax,M=e.ay,B=e.j,C=e.av,D=e.m,N=e.aB,K=e.aI},e=>{A=e.u},e=>{E=e.i},null],execute:function(){const a={key:1,class:"ion-text-center loading-spinner-container"},G={key:2},H={class:"ion-text-center"};e("default",n({__name:"DropdownSearchModal",props:{title:{},fetchMethod:{type:Function},isSearchable:{type:Boolean},searchType:{}},setup(e){const n=e,{data:L,isLoading:R,execute:Z}=A(n.fetchMethod),$=t(null),q=t("");l(async()=>{n.isSearchable||await Z()}),i(()=>n.isSearchable,async e=>{e&&await K(()=>{setTimeout(()=>{$.value&&$.value.$el.setFocus()},100)})},{immediate:!0});const z=async e=>{const a=e.target.value;q.value=a;const t="numeric"===n.searchType,l=t?a.replace(/\D/g,""):a;if(t){const e=parseInt(l);if(!l||isNaN(e))return L.value=[];await Z(e)}else l.length>=3?await Z(l):L.value=[]},J=()=>{L.value.length>0&&O(L.value[0])},O=e=>{N.dismiss(e)};function P(){N.dismiss()}return(n,t)=>(u(),c(o(D),null,{default:s(()=>[r(o(d),null,{default:s(()=>[r(o(p),null,{default:s(()=>[r(o(h),{slot:"start"},{default:s(()=>[r(o(y),{onClick:P},{default:s(()=>[r(o(f),{icon:o(m)},null,8,["icon"])]),_:1})]),_:1}),r(o(g),null,{default:s(()=>[v("Suchen nach "+_(e.title),1)]),_:1})]),_:1})]),_:1}),r(o(k),{class:"ion-padding"},{default:s(()=>[e.isSearchable?(u(),c(o(w),{key:0,ref_key:"searchbarRef",ref:$,placeholder:"numeric"===e.searchType?"Nummer eintippen...":"Min. 3 Zeichen eintippen...",inputmode:"numeric"===e.searchType?"numeric":"text",debounce:300,onIonInput:z,onKeydown:[S(J,["enter"]),t[0]||(t[0]=a=>"numeric"===e.searchType?o(E):void 0)]},null,8,["placeholder","inputmode"])):b("",!0),o(R)?(u(),x("div",a,[r(o(T),{name:"crescent"})])):!o(R)&&0===o(L).length&&("numeric"===e.searchType?q.value.length>0:q.value.length>=3)?(u(),x("div",G,[j("p",H,"Kein/e "+_(e.title)+" gefunden.",1)])):o(L).length>0?(u(),c(o(I),{key:3},{default:s(()=>[(u(!0),x(F,null,M(o(L),e=>(u(),c(o(B),{key:e.id,button:"",onClick:a=>O(e)},{default:s(()=>[r(o(C),null,{default:s(()=>[v(_(e.display_name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):b("",!0)]),_:1})]),_:1}))}}))}}});
